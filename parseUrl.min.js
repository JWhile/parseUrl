var Url;
(function(){var b=RegExp("^([^:]+)://(?:([^:@]+)(?::([^@]+))?@)?(?:(.+)\\.)?([a-zA-Z0-9_\\-]+\\.[a-z]{2,4}|localhost|(?:[0-9]{1,3}\\.?){3})(?:\\:([0-9]+))?([^#\\?]+)?(?:\\?([^#]+))?(#.+)?$"),c=RegExp("([^/]+)","g"),d=RegExp("([^=&]+)=([^&]+)","g"),e={http:80,https:443,ftp:21,telnet:23};Url=function(a){this.url=a;this.parsed=!1;this._path=this._query=this.hash=this.query=this.path=this.port=this.domain=this.subdomain=this.password=this.user=this.protocol=null};Url.prototype.parse=function(){var a=b.exec(this.url);
null!==a&&(this.protocol=a[1]||"",this.user=a[2]||"",this.password=a[3]||"",this.subdomain=a[4]||"",this.domain=a[5]||"",this.port=a[6]||"",this.path=a[7]||"",this.query=a[8]||"",this.hash=a[9]||"",this.parsed=!0);return this};Url.prototype.getPath=function(){if(null===this._path&&this.parsed){var a=this.path.match(c);this._path=null==a?[]:a}return this._path};Url.prototype.getQuery=function(){null===this._query&&this.parsed&&(this._query={},this.query.replace(d,function(a,b,c){this._query[b]=c;return a}));
return this._query};Url.prototype.getHost=function(){return this.parsed?(0<this.subdomain.length?this.subdomain+".":"")+this.domain:null};Url.prototype.getPort=function(){return this.parsed?""!==this.port?parseInt(this.port,10):e[this.protocol]||-1:-1}})();
